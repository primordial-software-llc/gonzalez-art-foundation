
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slideshow - Digital Art Gallery</title>
    <link href="https://tgonzalez.net/Content/site.css" rel="stylesheet"/>
    <link href="https://tgonzalez.net/Content/bootstrap.css" rel="stylesheet"/>

    <!-- Use a CDN (cloudflare) and these explicit paths will not be an issue. -->
    <script src="https://tgonzalez.net/Scripts/modernizr-2.6.2.js"></script>
    <script src="https://tgonzalez.net/Scripts/modernizr-2.8.3.js"></script>
    <script src="https://tgonzalez.net/Scripts/jquery-3.1.1.js"></script>
    <script src="https://tgonzalez.net/Scripts/bootstrap.js"></script>
    <script src="https://tgonzalez.net/Scripts/respond.js"></script>

    <script>

        function loadSearchResults(results) {
            var html = '';
            for (var ct = 0; ct < results.length; ct += 1) {
                html += '<div><a target="_blank" href="http://www.the-athenaeum.org/art/display_image.php?id=' + results[ct].imageId + '">' + results[ct].name + ' (' + results[ct].date + ') by ' + results[ct].artist + '</a></div>';
            }

            $('#search-results').html(html);
        }

        $( document ).ready(function() {

            $('#login').click(function () {
                var url = 'https://tgonzalez.net/api/Gallery/token?username=' + $('#username').val() + '&password=' + $('#password').val();

                fetch(url, {mode: 'cors'}).then(function(response) {
                    response
                        .json()
                        .then(function (json) {
                            window.token = json.token;
                        });
                });
            });

            $('#likeSearch').click(function () {
                var url = 'https://tgonzalez.net/api/Gallery/searchLikeArtist?token=' + encodeURIComponent(window.token) + '&artist=' + $('#likeSearchText').val();
                fetch(url).then(function(response) {
                    response
                        .json()
                        .then(function (json) {
                            loadSearchResults(json);
                        });
                });
            });

            $('#exactSearch').click(function () {
                console.log($('#exactSearchText').val());
            });

            $('#idSearch').click(function () {
                console.log($('#idSearchText').val());
            });

        });

    </script>

</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Digital Art Gallery</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/Home/Slideshow">Slideshow</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="container body-content">
        

    <div class="jumbotron">
        <h1>Slideshow</h1>

        <div class="input-form">
            <input id="username" type="text" placeholder="Username"/>
            <input id="password" type="text" placeholder="Password"/>
            <input id="login" type="button" value="Login"/>
        </div>
    
        <div class="input-form">
            <input id="likeSearchText" type="text" placeholder="Search by Like Artist"/>
            <input id="likeSearch" type="button" value="Search"/>
        </div>

        <div class="input-form">
            <input id="exactSearchText" type="text" placeholder="Search by Exact Artist" />
            <input id="exactSearch" type="button" value="Search" />
        </div>

        <div class="input-form">
            <input id="idSearchText" type="text" placeholder="Search by starting ID" />
            <input id="idSearch" type="button" value="Search" />
        </div>

        <div id="search-results">

        </div>
    </div>

    <hr />
    <footer>
        <p>&copy; 2017 - Timothy Gonzalez - Digital Art Gallery</p>
    </footer>
</div>

</body>
</html>
